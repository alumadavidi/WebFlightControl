<!DOCTYPE html>
<html lang="en">
<head>
    <title>flight</title>
    <meta charset="utf-8">
    
    <link href="bootstrap/css/global.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <style>
        #map {
            height: 500px;
            width: 103%;
        }

        #details {
            visibility: hidden;
        }

        #draganddropimage {
            visibility: hidden;
        }

        #droptarget {
            float: left;
            padding: 10px;
            border: 1px solid #aaaaaa;
        }
    </style>
</head>
<body>
    <script src="bootstrap/js/dragAndDropScripts.js"></script>
    <script src="bootstrap/js/mapScripts.js"></script>
    <script src="bootstrap/js/listFlightScripts.js"></script>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-7 border">
                <div class="row" id="map">
                    map
                </div>
                <div class="row bg-dark" id="details">
                    <h2 class="text-white">Flight Details</h2>
                    <table class="table table-dark">
                        <thead>
                            <tr>
                                <th>id</th>
                                <th>longitude</th>
                                <th>latitude</th>
                                <th>passengers</th>
                                <th>company name</th>
                                <th>date time</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>

            <div class="droptarget col-md-5" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <div class="jumbotron" id="flightlist">
                    <h3>My flights</h3>
                    <button onclick="myFunction()">X</button>

                    <p id="demo"></p>
                    <table class="table table-sm" id="myflightstbl">
                        <thead>
                            <tr>
                                <th>id</th>
                                <th>company name</th>

                                <th></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <h3>ex flight</h3>
                    <table class="table table-sm" id="exflightstbl">
                        <thead>
                            <tr>
                                <th>id</th>
                                <th>company name</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <img src="draganddrop.jpeg" id="draganddropimage" />
            </div>
        </div>
    </div>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA372PcuJQKYrKADjhHTLLDVcfsoCzF-4M&callback=initMap">
    </script>

    <script>
        var flightsUrl = "api/Flights";

        $.ajax({
            type: "GET",
            url: flightsUrl,
            dataType: 'json',
            data: {
                relative_to: "2020-12-26T23:56:21Z5"
            }, success: function (data) {
                data.forEach(function (flight) {
                    $("#myflightstbl").append("<tr id=" + flight.flight_Id + "><td>" + flight.flight_Id + "</td>" + "<td>" +
                        flight.company_name + "</td>" + "<td>" +
                        '<button onclick="delFlight()">X</button>'
                        + "</td></tr>");
                });
            }
        });
    </script>



</body>
</html>